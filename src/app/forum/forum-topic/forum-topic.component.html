<bio-card dark>
  @if (loading) {
    <bio-loading />
  }
  <h4 bioCardTitle>{{ topic.name }}</h4>
  <bio-card-content>
    <div class="actions">
      <bio-checkbox
        [checked]="topic.notifications"
        (checkedChange)="onNotificationsChange($event)"
        [disabled]="loadingNotifications"
        >
        Notifications
      </bio-checkbox>
      @if (!topic.lockedDate || topic.isModerator) {
        <button accent bioButton type="button" (click)="onReply()" [loading]="loadingReply">
          <bio-icon>reply</bio-icon>
          Reply
        </button>
        @if (topic.isModerator) {
          <button accent bioButton type="button" (click)="onMove()" [loading]="loadingMove">
            <bio-icon>swap_horiz</bio-icon>
            Move
          </button>
        }
      }
    </div>
    @for (post of topic.posts.items; track trackById($index, post)) {
      <bio-forum-topic-post [idSubCategory]="topic.idSubCategory"
        [post]="post"
        [odd]="$odd"
        [topicLocked]="!!topic.lockedDate && !topic.isModerator"
        [loadingReply]="loadingReply"
        (postChange)="onPostChange($event)"
        (postDelete)="onPostDelete()"
        (postQuote)="onReply($event)"
        (topicDelete)="onTopicDelete()"
       />
    }
  </bio-card-content>
  <bio-card-actions end>
    <bio-pagination [meta]="topic.posts.meta"
      itemsPerPageHidden
      (currentPageChange)="onPageChange($event)"
     />
  </bio-card-actions>
</bio-card>
